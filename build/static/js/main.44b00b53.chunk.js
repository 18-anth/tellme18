(this.webpackJsonptellme27=this.webpackJsonptellme27||[]).push([[0],{108:function(e,c,t){},109:function(e,c,t){},164:function(e,c){},166:function(e,c){},174:function(e,c,t){},175:function(e,c,t){},177:function(e,c,t){},178:function(e,c,t){},179:function(e,c,t){},180:function(e,c,t){},181:function(e,c,t){},182:function(e,c,t){},183:function(e,c,t){"use strict";t.r(c);var n=t(1),s=t.n(n),a=t(80),i=t.n(a),o=(t(94),t(95),t(26)),r=t(5),l=t(4),j=t(2),d=t(81),b=t.n(d),u=(t(108),t(109),t(0)),m=function(){return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsxs)("div",{className:"logo",children:[Object(u.jsx)("img",{src:"https://www.gstatic.com/meet/google_meet_horizontal_wordmark_2020q4_2x_icon_124_40_292e71bcb52a56e2a9005164118f183b.png"}),Object(u.jsx)("span",{className:"help-text",children:"Meet"})]}),Object(u.jsxs)("div",{className:"action-btn",children:[Object(u.jsx)(l.a,{className:"icon-block",icon:j.m}),Object(u.jsx)(l.a,{className:"icon-block",icon:j.g}),Object(u.jsx)(l.a,{className:"icon-block",icon:j.c})]})]})},h=function(){var e=Object(r.f)();return Object(u.jsxs)("div",{className:"home-page",children:[Object(u.jsx)(m,{}),Object(u.jsxs)("div",{className:"body",children:[Object(u.jsxs)("div",{className:"left-side",children:[Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("h2",{children:"Premium video meetings. Now free for everyone."}),Object(u.jsx)("p",{children:"We re-engineered the service we built for secure business meetings, Google Meet, to make it free and available for all."}),Object(u.jsxs)("div",{className:"action-btn",children:[Object(u.jsxs)("button",{className:"btn green",onClick:function(){var c=b.a.generate();e.push("/".concat(c,"#init"))},children:[Object(u.jsx)(l.a,{className:"icon-block",icon:j.s}),"New Meeting"]}),Object(u.jsxs)("div",{className:"input-block",children:[Object(u.jsxs)("div",{className:"input-section",children:[Object(u.jsx)(l.a,{className:"icon-block",icon:j.h}),Object(u.jsx)("input",{placeholder:"Enter a code or link"})]}),Object(u.jsx)("button",{className:"btn no-bg",children:"Join"})]})]})]}),Object(u.jsxs)("div",{className:"help-text",children:[Object(u.jsx)("a",{href:"",children:"Learn more"})," about Google Meet"]})]}),Object(u.jsx)("div",{className:"right-side",children:Object(u.jsx)("div",{className:"content",children:Object(u.jsx)("img",{src:"https://www.gstatic.com/meet/google_meet_marketing_ongoing_meeting_grid_427cbb32d746b1d0133b898b50115e96.jpg"})})})]})]})},O=t(46),x=t(8),g=t.n(x),f=t(20),p=t(7),v=t(32),N=t.n(v),k=function(){var e=Object(f.a)(g.a.mark((function e(c){var t,n,s=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,N.a.post(c,t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(c){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(g.a.mark((function e(c){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get(c).then((function(e){return e.data}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(c){return e.apply(this,arguments)}}(),y="http://localhost:4000",M=t(83),S=t.n(M),T=t(84),C=t.n(T),V=(t(174),t(175),t(85)),_=t.n(V),P=function(e){return _()(e).format("h:mm A")},A=function(e){var c=e.setIsMessenger,t=e.sendMsg,s=e.messageList,a=Object(n.useState)(""),i=Object(p.a)(a,2),o=i[0],r=i[1],d=function(e){r(e.target.value)};return Object(u.jsxs)("div",{className:"messenger-container",children:[Object(u.jsxs)("div",{className:"messenger-header",children:[Object(u.jsx)("h3",{children:"Meeting details"}),Object(u.jsx)(l.a,{className:"icon",icon:j.o,onClick:function(){c(!1)}})]}),Object(u.jsxs)("div",{className:"messenger-header-tabs",children:[Object(u.jsxs)("div",{className:"tab",children:[Object(u.jsx)(l.a,{className:"icon",icon:j.r}),Object(u.jsx)("p",{children:"People (1)"})]}),Object(u.jsxs)("div",{className:"tab active",children:[Object(u.jsx)(l.a,{className:"icon",icon:j.d}),Object(u.jsx)("p",{children:"Chat"})]})]}),Object(u.jsx)("div",{className:"chat-section",children:s.map((function(e){return Object(u.jsxs)("div",{className:"chat-block",children:[Object(u.jsxs)("div",{className:"sender",children:[e.user," ",Object(u.jsx)("small",{children:P(e.time)})]}),Object(u.jsx)("p",{className:"msg",children:e.msg})]},e.time)}))}),Object(u.jsxs)("div",{className:"send-msg-section",children:[Object(u.jsx)("input",{placeholder:"Send a message to everyone",value:o,onChange:function(e){return d(e)},onKeyDown:function(e){return function(e){"Enter"===e.key&&(t(o),r(""))}(e)}}),Object(u.jsx)(l.a,{className:"icon",icon:j.k,onClick:d})]})]})},D=t(45),I=function(e,c){var t=Object(D.a)(e);switch(c.type){case"addMessage":return[].concat(Object(D.a)(t),[c.payload]);default:return e}},E=(t(177),function(e){var c=e.messageAlert;return Object(u.jsxs)("div",{className:"message-alert-popup",children:[Object(u.jsxs)("div",{className:"alert-header",children:[Object(u.jsx)(l.a,{className:"icon",icon:j.d}),Object(u.jsx)("h3",{children:c.payload.user})]}),Object(u.jsx)("p",{className:"alert-msg",children:c.payload.msg})]})}),L=(t(178),function(e){var c=e.setMeetInfoPopup,t=e.url;return Object(u.jsxs)("div",{className:"meeting-info-block",children:[Object(u.jsxs)("div",{className:"meeting-header",children:[Object(u.jsx)("h3",{children:"Your meeting's ready"}),Object(u.jsx)(l.a,{className:"icon",icon:j.o,onClick:function(){c(!1)}})]}),Object(u.jsxs)("button",{className:"add-people-btn",children:[Object(u.jsx)(l.a,{className:"icon",icon:j.p}),"Add Others"]}),Object(u.jsx)("p",{className:"info-text",children:"Or share this meeting link with others you want in the meeting"}),Object(u.jsxs)("div",{className:"meet-link",children:[Object(u.jsx)("span",{children:t}),Object(u.jsx)(l.a,{className:"icon",icon:j.e,onClick:function(){return navigator.clipboard.writeText(t)}})]}),Object(u.jsxs)("div",{className:"permission-text",children:[Object(u.jsx)(l.a,{className:"icon red",icon:j.n}),Object(u.jsx)("p",{className:"small-text",children:"People who use this meeting link must get your permission before they can join."})]}),Object(u.jsx)("p",{className:"small-text",children:"Joined as akshay@gmail.com"})]})}),R=(t(179),function(e){var c=e.isPresenting,t=e.stopScreenShare,n=e.screenShare,s=e.isAudio,a=e.isVideo,i=e.toggleAudio,o=e.toggleVideo,r=e.disconnectCall,d=e.playStop;return Object(u.jsxs)("div",{className:"footer-item",children:[Object(u.jsx)("div",{className:"left-item",children:Object(u.jsxs)("div",{className:"icon-block",children:["Meeting details",Object(u.jsx)(l.a,{className:"icon",icon:j.a})]})}),Object(u.jsxs)("div",{className:"center-item",children:[Object(u.jsx)("div",{className:"icon-block ".concat(s?null:"red-bg"),onClick:function(){return i(!s)},children:Object(u.jsx)(l.a,{className:"icon",icon:s?j.i:j.j})}),Object(u.jsx)("div",{className:"icon-block",onClick:r,children:Object(u.jsx)(l.a,{className:"icon red",icon:j.l})}),Object(u.jsx)("div",{className:"icon-block ".concat(a?null:"red-bg"," video"),onClick:function(){return o(!a)},children:Object(u.jsx)(l.a,{className:"icon",onclick:d,icon:a?j.s:j.t})})]}),Object(u.jsxs)("div",{className:"right-item",children:[Object(u.jsxs)("div",{className:"icon-block",children:[Object(u.jsx)(l.a,{className:"icon red",icon:j.b}),Object(u.jsx)("p",{className:"title",children:"Turn on captions"})]}),c?Object(u.jsxs)("div",{className:"icon-block",onClick:t,children:[Object(u.jsx)(l.a,{className:"icon red",icon:j.f}),Object(u.jsx)("p",{className:"title",children:"Stop presenting"})]}):Object(u.jsxs)("div",{className:"icon-block",onClick:n,children:[Object(u.jsx)(l.a,{className:"icon red",icon:j.f}),Object(u.jsx)("p",{className:"title",children:"Present now"})]})]})]})}),U=(t(180),function(e){var c=e.isMessenger,t=e.setIsMessenger,s=e.messageAlert,a=e.setMessageAlert,i=null,o=Object(n.useState)((function(){return P()})),r=Object(p.a)(o,2),d=r[0],b=r[1];return Object(n.useEffect)((function(){return i=setInterval((function(){return b(P())}),1e3),function(){clearInterval(i)}}),[]),Object(u.jsxs)("div",{className:"frame-header",children:[Object(u.jsx)("div",{className:"header-items icon-block",children:Object(u.jsx)(l.a,{className:"icon",icon:j.r})}),Object(u.jsxs)("div",{className:"header-items icon-block",onClick:function(){t(!0),a({})},children:[Object(u.jsx)(l.a,{className:"icon",icon:j.d}),!c&&s.alert&&Object(u.jsx)("span",{className:"alert-circle-icon"})]}),Object(u.jsx)("div",{className:"header-items date-block",children:d}),Object(u.jsx)("div",{className:"header-items icon-block",children:Object(u.jsx)(l.a,{className:"icon profile",icon:j.q})})]})}),F=(t(181),t(86)),J=t(87),q=t(89),B=t(88),G=function(e){Object(q.a)(t,e);var c=Object(B.a)(t);function t(e){var n;return Object(F.a)(this,t),(n=c.call(this,e)).componentDidMount=function(){n.pc=new RTCPeerConnection(null),n.pc.onicecandidate=function(e){e.candidate&&console.log(JSON.stringify(e.candidate))}},n.localVideoref=s.a.createRef(),n.remoteVideoref=s.a.createRef(),n}return Object(J.a)(t,[{key:"render",value:function(){var e=this;return navigator.mediaDevices.getUserMedia({video:!0}).then((function(c){e.localVideoref.current.srcObject=c})).catch((function(e){console.log("getUserMediaError: ",e)})),Object(u.jsx)("div",{children:Object(u.jsx)("video",{style:{width:240,height:240,margin:5},ref:this.localVideoref,autoPlay:!0})})}}]),t}(n.Component),z=void 0,K=null,W=S.a.connect("http://localhost:4000"),Y=[],H=function(e){var c=Object(r.f)(),t=Object(r.g)().id,s="#init"==window.location.hash,a="".concat(window.location.origin).concat(window.location.pathname),i=null,o=Object(n.useReducer)(I,Y),l=Object(p.a)(o,2),j=l[0],d=l[1],b=Object(n.useState)(),m=Object(p.a)(b,2),h=m[0],x=m[1],v=Object(n.useState)(),N=Object(p.a)(v,2),M=N[0],S=N[1],T=Object(n.useState)(!1),V=Object(p.a)(T,2),_=V[0],P=V[1],D=Object(n.useState)(!1),F=Object(p.a)(D,2),J=F[0],q=F[1],B=Object(n.useState)(!1),H=Object(p.a)(B,2),Q=H[0],X=H[1],Z=Object(n.useState)({}),$=Object(p.a)(Z,2),ee=$[0],ce=$[1],te=Object(n.useState)(!0),ne=Object(p.a)(te,2),se=ne[0],ae=ne[1],ie=Object(n.useState)(!0),oe=Object(p.a)(ie,2),re=oe[0],le=oe[1];Object(n.useEffect)((function(){s&&P(!0),de(),W.on("code",(function(e){K.signal(e)}))}),[]);var je=function(){var e=Object(f.a)(g.a.mark((function e(){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("".concat(y).concat("/api/get-call-id","/").concat(t));case 2:(c=e.sent).code&&K.signal(c.code);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){x(e),K=new C.a({initiator:s,trickle:!1,stream:e}),s||je(),K.on("signal",function(){var e=Object(f.a)(g.a.mark((function e(c){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=6;break}return n={id:t,signalData:c},e.next=4,k("".concat(y).concat("/api/save-call-id"),n);case 4:e.next=7;break;case 6:W.emit("code",c,(function(e){console.log("code sent")}));case 7:case"end":return e.stop()}}),e)})));return function(c){return e.apply(this,arguments)}}()),K.on("connect",(function(){})),K.on("data",(function(e){clearTimeout(i),d({type:"addMessage",payload:{user:"other",msg:e.toString(),time:Date.now()}}),ce({alert:!0,isPopup:!0,payload:{user:"other",msg:e.toString()}}),i=setTimeout((function(){ce(Object(O.a)(Object(O.a)({},ee),{},{isPopup:!1,payload:{}}))}),1e4)})),K.on("stream",(function(e){var c=document.querySelector("video");"srcObject"in c?c.srcObject=e:c.src=window.URL.createObjectURL(e),c.play()}))})).catch((function(){}))};return navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){z.localVideoref.current.srcObject=e})).catch((function(e){console.log("getUserMediaError: ",e)})),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"callpage-container",children:[Object(u.jsx)("div",{id:"video-grid",src:"",controls:!0,children:Object(u.jsx)(G,{})}),Object(u.jsx)(U,{isMessenger:Q,setIsMessenger:X,messageAlert:ee,setMessageAlert:ce}),Object(u.jsx)(R,{isPresenting:J,stopScreenShare:function(){M.getVideoTracks().forEach((function(e){e.stop()})),K.replaceTrack(M.getVideoTracks()[0],h.getVideoTracks()[0],h),q(!1)},screenShare:function(){navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){K.replaceTrack(h.getVideoTracks()[0],e.getVideoTracks()[0],h),S(e),e.getTracks()[0].onended=function(){K.replaceTrack(e.getVideoTracks()[0],h.getVideoTracks()[0],h)},q(!0)}))},isAudio:se,isVideo:re,playStop:function(){console.log("object");var e=K.getVideoTracks()[0].enabled;K.getVideoTracks()[0].enabled=!e},toggleAudio:function(e){h.getAudioTracks()[0].enabled=e,ae(e)},toggleVideo:function(e){h.getVideoTracks()[0].enabled=e,le(e)},disconnectCall:function(){K.destroy(),c.push("/"),window.location.reload()}}),s&&_&&Object(u.jsx)(L,{setMeetInfoPopup:P,url:a}),Q?Object(u.jsx)(A,{setIsMessenger:X,sendMsg:function(e){K.send(e),d({type:"addMessage",payload:{user:"you",msg:e,time:Date.now()}})},messageList:j}):ee.isPopup&&Object(u.jsx)(E,{messageAlert:ee})]})})},Q=(t(182),function(){return Object(u.jsxs)("div",{className:"no-match",children:[Object(u.jsx)(m,{}),Object(u.jsxs)("div",{className:"no-match__content",children:[Object(u.jsx)("h2",{children:"Invalid video call name."}),Object(u.jsx)("div",{className:"action-btn",children:Object(u.jsx)(o.b,{className:"btn green",to:"/",children:"Return to home screen"})})]})]})});var X=function(){return Object(u.jsx)(o.a,{children:Object(u.jsxs)(r.c,{children:[Object(u.jsx)(r.a,{exact:!0,path:"/:id",children:Object(u.jsx)(H,{})}),Object(u.jsx)(r.a,{exact:!0,path:"/",children:Object(u.jsx)(h,{})}),Object(u.jsx)(r.a,{path:"*",children:Object(u.jsx)(Q,{})})]})})},Z=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,184)).then((function(c){var t=c.getCLS,n=c.getFID,s=c.getFCP,a=c.getLCP,i=c.getTTFB;t(e),n(e),s(e),a(e),i(e)}))};i.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(X,{})}),document.getElementById("root")),Z()},94:function(e,c,t){},95:function(e,c,t){}},[[183,1,2]]]);
//# sourceMappingURL=main.44b00b53.chunk.js.map